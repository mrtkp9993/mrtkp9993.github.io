import"https://images.dmca.com/Badges/DMCABadgeHelper.min.js";(function(i,e,a,h,d){i[h]=i[h]||[],i[h].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var t=e.getElementsByTagName(a)[0],n=e.createElement(a),r=h!="dataLayer"?"&l="+h:"";n.async=!0,n.src="https://www.googletagmanager.com/gtm.js?id="+d+r,t.parentNode.insertBefore(n,t)})(window,document,"script","dataLayer","GTM-KJJ2CWF");class m{constructor(e,a,h=null){this.x=e,this.y=a,this.vx=(Math.random()-.5)*.5,this.vy=(Math.random()-.5)*.5,this.life=300+Math.random()*100,this.maxLife=this.life,this.age=0,this.size=2,this.energy=1,this.reproductionEnergy=0,this.parent=h,this.children=[]}update(e,a,h){this.age++,this.life--,this.energy=Math.max(0,Math.min(1,this.energy-.001)),this.energy>.7&&(this.reproductionEnergy+=.01);const d=.2*(this.energy*.5+.5);this.vx+=(Math.random()-.5)*.1*d,this.vy+=(Math.random()-.5)*.1*d,this.vx*=.95,this.vy*=.95,this.x+=this.vx,this.y+=this.vy;const t=50;if(this.x<t&&(this.vx+=.1),this.x>a-t&&(this.vx-=.1),this.y<t&&(this.vy+=.1),this.y>h-t&&(this.vy-=.1),e.forEach(n=>{if(n===this||n===this.parent||this.children.includes(n))return;const r=n.x-this.x,s=n.y-this.y,c=Math.sqrt(r*r+s*s);if(c<100){c<30&&this.energy>.3&&n.energy<.7&&(this.energy-=.01,n.energy+=.01);const y=(c-50)*1e-4;this.vx+=r*y,this.vy+=s*y}}),this.reproductionEnergy>1&&this.children.length<2&&this.energy>.8){const n=this.x+(Math.random()-.5)*20,r=this.y+(Math.random()-.5)*20,s=new m(n,r,this);return this.children.push(s),this.reproductionEnergy=0,this.energy*=.7,s}return null}isDead(){return this.life<0||this.energy<=0}}let g,o=[];function u(){const i=document.getElementById("lifeCanvas");if(!i)return;const e=i.getContext("2d");function a(){i.width=window.innerWidth,i.height=window.innerHeight}window.addEventListener("resize",a),a(),o=Array(60).fill(0).map(()=>new m(Math.random()*i.width,Math.random()*i.height));function h(){e.fillStyle="rgba(0, 0, 0, 0.05)",e.fillRect(0,0,i.width,i.height);const d=[];for(o.forEach(t=>{const n=t.update(o,i.width,i.height);n&&d.push(n),o.forEach(s=>{if(s===t)return;const c=s.x-t.x,y=s.y-t.y,f=Math.sqrt(c*c+y*y);if(f<100){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(s.x,s.y);const l=(1-f/100)*.15*Math.min(t.energy,s.energy);e.strokeStyle=`rgba(255, 255, 255, ${l})`,e.stroke()}});const r=t.life/t.maxLife;e.beginPath(),e.arc(t.x,t.y,t.size*(.5+t.energy*.5),0,Math.PI*2),e.fillStyle=`rgba(255, 255, 255, ${r*t.energy*.8})`,e.fill()}),o=[...o,...d].filter(t=>!t.isDead()).slice(0,100);o.length<20;)o.push(new m(Math.random()*i.width,Math.random()*i.height));g=requestAnimationFrame(h)}return h(),()=>{g&&cancelAnimationFrame(g),window.removeEventListener("resize",a)}}document.addEventListener("DOMContentLoaded",u);document.addEventListener("astro:before-swap",()=>{g&&cancelAnimationFrame(g)});
